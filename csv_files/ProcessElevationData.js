/**
 * Created by HP-PC on 22-07-2016.
 */
var info = [[5, [29.01233899999999, 105.851885], 191.0], [8, [30.894348, 120.086823], 2.7], [12, [34.9230736, 112.5181204], 159.2], [14, [45.51932, 125.078223], 129.2], [16, [29.432701, 113.151012], 38.7], [18, [31.652305, 119.245598], 62.0], [19, [33.011971, 118.544361], 41.9], [20, [34.647693, 118.093528], 30.5], [32, [32.414688, 115.637577], 30.3], [53, [40.692169, 117.163821], 235.7], [54, [39.084158, 117.200983], 4.5], [55, [33.86, 115.484454], 41.4], [56, [30.5063791, 117.0234068], 17.4], [57, [42.223828, 123.726035], 57.1], [58, [32.641579, 116.915776], 28.0], [59, [32.96583, 115.605539], 33.0], [60, [40.006459, 117.605271], 19.0], [61, [41.188941, 122.1895], 4.1], [62, [25.0250495, 102.6850636], 1888.0], [63, [23.07344, 113.419515], 0.9], [64, [23.464958, 113.010733], -17.3], [65, [30.57918299999999, 114.230342], 28.8], [66, [40.5192437, 115.2857074], 634.2], [67, [44.910358, 125.692495], 150.9], [68, [45.619588, 122.838826], 153.0], [69, [47.64270699999999, 132.510919], 53.0], [70, [40.68076600000001, 122.244579], 0.7], [72, [38.3310925, 113.9566204], 190.0], [73, [40.099228, 115.720468], 719.8], [74, [26.582347, 101.718637], 1156.5], [75, [30.760781, 111.279959], 116.8], [76, [29.438263, 115.249905], 86.8], [77, [31.49117, 120.31191], 5.3], [78, [31.624522, 117.890355], 13.5], [79, [23.642308, 111.561035], 40.2], [80, [22.782334, 108.131742], 84.4], [81, [36.061089, 103.834304], 1524.8], [83, [40.535988, 109.935468], 1006.0], [84, [35.596383, 110.712063], 396.0], [85, [36.711935, 116.983659], 25.8], [97, [30.895425, 120.733323], 5.2], [103, [31.274553, 120.455284], 7.1], [104, [30.274085, 120.15507], 19.3], [105, [31.9050389, 117.1700005], 30.1], [106, [33.876627, 116.584177], 33.4], [107, [29.371815, 113.129685], 38.0], [108, [39.576541, 111.449986], 1114.4], [109, [32.950546, 117.279668], 16.1], [110, [28.314116, 112.947609], 34.7], [111, [31.340637, 119.823308], 33.8], [112, [32.311225, 119.710901], 2.7], [113, [37.5041673, 105.1699037], 1229.8], [114, [29.260078, 116.183833], 11.9], [115, [35.104674, 118.356414], 68.0], [116, [41.8836387, 124.1799403], 120.0], [117, [28.924953, 105.019635], 347.0], [118, [28.871811, 105.442258], 262.3], [119, [29.5144594, 103.7674609], 363.1], [120, [32.712987, 115.066889], 38.4], [121, [39.691156, 106.822779], 1103.6], [122, [34.765515, 113.753602], 87.3], [123, [28.682892, 115.858198], 15.9], [124, [24.65734, 102.71863], 1940.2], [125, [32.540157, 111.513127], 109.3], [126, [22.816239, 109.862962], 114.5], [127, [22.21285, 106.705054], 143.8], [128, [26.041931, 119.582923], 123.3], [129, [31.056688, 120.725547], 4.6], [131, [24.778481, 110.496593], 112.1], [132, [41.068534, 123.3388878], 98.3], [133, [50.245129, 127.528294], 122.0], [134, [34.562528, 117.733832], 27.9], [135, [40.1242275, 124.3984798], 7.0], [136, [42.612755, 130.581954], 10.0], [137, [32.66786400000001, 111.719178], 184.6], [138, [36.49241, 115.279219], 35.7], [139, [30.922218, 120.714675], 3.0], [140, [22.653095, 101.591818], 1071.1], [141, [34.544296, 110.24635], 572.6], [142, [22.534708, 113.249705], 7.2], [143, [50.21558899999999, 119.578421], 533.4], [144, [48.364687, 134.307884], 39.8], [146, [22.529404, 103.93935], 110.5], [147, [34.5986761, 118.1498672], 34.2], [149, [31.978959, 118.054925], 42.3], [150, [35.104674, 118.356414], 68.0], [151, [33.482982, 117.910629], 19.2], [152, [33.475959, 118.098504], 18.9], [153, [34.621237, 118.104163], 32.8], [154, [32.473258, 115.419537], 37.0], [155, [33.974941, 115.887042], 37.4], [156, [34.596653, 119.221611], 3.9], [157, [33.815443, 116.353519], 29.2], [158, [32.657442, 105.881915], 642.7], [159, [34.017646, 117.229506], 29.8], [161, [33.240434, 115.514284], 35.1], [162, [32.300068, 115.776313], 32.0], [164, [34.205768, 117.284124], 36.2], [166, [32.677881, 115.549205], 33.7], [167, [28.611092, 105.73959], 376.9], [168, [30.263161, 114.57325], 16.7], [172, [29.13808, 113.113474], 51.9], [173, [28.917923, 112.125245], 30.3], [175, [29.466597, 112.126873], 29.2], [176, [29.042415, 112.313273], 33.9], [177, [24.411808, 102.83937], 1721.0], [178, [39.377855, 106.706337], 1159.4], [179, [34.369182, 106.713924], 879.3], [180, [41.125307, 126.194031], 180.2], [181, [36.620938, 101.780251], 2256.6], [182, [49.263497, 118.115787], 555.4], [183, [49.211575, 119.765745], 611.5], [184, [28.55386, 112.35518], 81.2], [185, [51.725637, 126.665319], 169.9], [186, [41.738825, 126.750787], 394.6], [187, [41.419284, 128.196079], 726.7], [188, [43.739112, 128.695975], 347.9], [189, [44.306211, 126.504324], 168.2], [190, [19.3025, 108.6669444], 2.1], [191, [45.762686, 132.93721], 83.9], [192, [19.971177, 110.398366], 8.7], [193, [29.273414, 116.203915], 28.2], [194, [24.433353, 98.58489499999999], 926.8], [195, [45.36760599999999, 124.741971], 126.0], [196, [48.889109, 130.403564], 88.0], [197, [25.617402, 100.225824], 1969.1], [198, [43.793026, 87.627704], 900.3], [199, [43.793026, 87.627704], 900.3], [63200, [45.184014, 130.553176], 395.4], [201, [43.89458219999999, 125.3249555], 220.6], [202, [20.017378, 110.349229], 16.2], [203, [28.877348, 116.432798], 18.5], [204, [46.799778, 130.318879], 82.1], [205, [44.55165299999999, 129.633169], 234.0], [206, [21.547822, 107.971826], 13.9], [207, [45.295075, 130.969333], 193.7], [208, [45.295075, 130.969333], 193.7], [209, [24.8535081, 102.7364962], 1886.0], [210, [25.304817, 102.774898], 2072.5], [211, [42.267975, 129.209168], 443.9], [212, [47.7828401, 117.6864953], 577.0], [213, [53.481561, 122.359563], 290.6], [214, [29.49125, 94.611993], 2937.3], [215, [48.364687, 134.307884], 39.8], [216, [22.208452, 106.893473], 347.8], [217, [25.112046, 99.16176100000001], 1672.9], [218, [45.889427, 126.587709], 116.0], [219, [25.8006596, 100.1927389], 1962.0]];
var BasinArray = [];
var BasinMarkup = [];


//Info is a two dimensional Array of the following format:
//[StationID,[Latitude,Longitude,Altitude]

//Below is a function that lets d3 view 
d3.csv('csv_files/Basin_Info.csv',function (error,data) {
    var Basin = '';

    var SingleBasin = [];
    data.forEach(function (d) {
        if (d.basin == Basin) {
            info.forEach(function (de) {
                if(de[0]==d.code) {
                    SingleBasin.push(de);
                }
            })
        } else {
            if (Basin!='') {
                var BasinInstance = {
                    basin: Basin,
                    info: SingleBasin
                };
                BasinArray.push(BasinInstance);
            }

            Basin = d.basin;
            SingleBasin = [];
            info.forEach(function (de) {
                if(de[0]==d.code) {
                    SingleBasin.push(de);
                }
            })
        }
    });

    var BasinInstance = {
        basin: Basin,
        info: SingleBasin
    };
    BasinArray.push(BasinInstance);

    
});

//Below is a function that lets d3 view
d3.csv('csv_files/BasinInfo.csv',function (error,data) {
    var Basin = '';
    var num = "1";
    var SingleBasin = [];
    var subBasin = [];
    data.forEach(function (d) {
        if (d.basin == Basin) {
            info.forEach(function (de) {
                    if (de[0] == d.code) {
                        SingleBasin.push(de);
                    }
                })
        } else {

                if (Basin != '') {
                    var BasinInstance = {
                        basin: Basin,
                        num: num,
                        info: SingleBasin
                    };
                    subBasin.push(BasinInstance);
                }

                Basin = d.basin;
                num = d.num;
                SingleBasin = [];
                info.forEach(function (de) {
                    if (de[0] == d.code) {
                        SingleBasin.push(de);
                    }
                });
            }
    });

    var BasinInstance = {
        basin: Basin,
        info: SingleBasin,
        num: num
    };

    subBasin.push(BasinInstance);

    var BasinSubList = [];
    num = "1";

    subBasin.forEach(function (d) {
        if (d.num == num) {
            BasinSubList.push(d)
        } else {
            BasinMarkup.push(BasinSubList);
            BasinSubList = [];
            num = d.num;
            BasinSubList.push(d);
        }
    });

    BasinMarkup.push(BasinSubList);
});

//Basin Info is an array of the following:
// [ID,[Lat,Long], ]